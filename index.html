<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>拜拜小幫手 V2 (BaiBai Note)</title>
    
    <!-- 1. 引入核心函式庫 (React, Tailwind, Lunar) -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lunar-javascript/lunar.js"></script>

    <!-- 設定 Tailwind 字型 -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap');
        body { font-family: 'Noto Sans TC', sans-serif; }
        
        /* 動畫效果 */
        @keyframes slideUp {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }
        .animate-slide-up {
            animation: slideUp 0.3s ease-out forwards;
        }
    </style>
</head>
<body class="bg-stone-100 text-stone-800">

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        
        // SVG Icons
        const Icons = {
            Calendar: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="18" height="18" x="3" y="4" rx="2" ry="2"/><line x1="16" x2="16" y1="2" y2="6"/><line x1="8" x2="8" y1="2" y2="6"/><line x1="3" x2="21" y1="10" y2="10"/></svg>,
            Info: () => <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>,
            ChevronRight: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m9 18 6-6-6-6"/></svg>,
            Bell: () => <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/><path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"/></svg>,
            User: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>,
            Gift: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="3" y="8" width="18" height="4" rx="1"/><path d="M12 8v13"/><path d="M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7"/><path d="M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5"/></svg>,
            AlertCircle: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" x2="12" y1="8" y2="12"/><line x1="12" x2="12.01" y1="16" y2="16"/></svg>,
            Close: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M18 6 6 18"/><path d="m6 6 18 12"/></svg>,
            Flame: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"/></svg>
        };

        // ==========================================
        // 1. 資料庫 (更新紙錢細節 與 七娘媽)
        // ==========================================
        const WORSHIP_DATA = [
            { 
                id: 'cny_eve', 
                title: '除夕 - 祭祖與地基主', 
                type: 'yearly', 
                lunarMonth: 12, 
                lunarDay: 29, 
                targets: ['祖先', '地基主'], 
                items: ['三牲', '年糕', '發糕', '水果'], 
                papers: ['刈金 (四方金) - 拜祖先', '銀紙 (大銀/小銀) - 拜祖先', '刈金 (四方金) - 拜地基主'],
                notes: ['除夕需在傍晚前拜完', '地基主在廚房往內拜', '地基主不可用神明的壽金'] 
            },
            { 
                id: 'cny_01', 
                title: '大年初一 - 走春拜天公', 
                type: 'yearly', 
                lunarMonth: 1, 
                lunarDay: 1, 
                targets: ['玉皇大帝', '神明'], 
                items: ['素果', '年糕', '甜茶'], 
                papers: ['天公金 (大百壽金)', '壽金', '補運金'],
                notes: ['忌殺生，建議全素', '早上越早拜越好'] 
            },
            { 
                id: 'cny_05', 
                title: '大年初五 - 開工迎財神', 
                type: 'yearly', 
                lunarMonth: 1, 
                lunarDay: 5, 
                targets: ['五路財神', '土地公'], 
                items: ['甜食', '發糕', '水果'], 
                papers: ['四色金 (壽金/刈金/福金/大百壽金)', '甲馬 (供神兵神將)'],
                notes: ['放鞭炮迎財神', '將過年垃圾倒掉(送窮)'] 
            },
            { 
                id: 'tomb', 
                title: '清明節 - 掃墓祭祖', 
                type: 'solar_term', 
                targets: ['祖先', '后土 (土地公)'], 
                items: ['潤餅', '草仔粿', '紅龜粿', '三牲'], 
                papers: ['壽金/福金 (拜后土)', '刈金/銀紙 (拜祖先)', '五色紙 (壓墓紙用)'],
                notes: ['掛紙(壓墓紙)象徵修繕房舍', '祭拜後分享供品'] 
            },
            { 
                id: 'dragon', 
                title: '端午節 - 祭祖地基主', 
                type: 'yearly', 
                lunarMonth: 5, 
                lunarDay: 5, 
                targets: ['祖先', '地基主'], 
                items: ['粽子', '水果', '雄黃酒'], 
                papers: ['刈金 (四方金)', '銀紙 (大銀/小銀)'],
                notes: ['門口掛艾草', '取午時水'] 
            },
            { 
                id: 'qixi', 
                title: '七夕 - 七娘媽生 (做十六歲)', 
                type: 'yearly', 
                lunarMonth: 7, 
                lunarDay: 7, 
                targets: ['七娘媽', '床母', '織女'], 
                items: ['麻油雞酒', '油飯', '圓仔花', '化妝品 (胭脂/水粉/圓鏡)'], 
                papers: ['壽金', '刈金', '七娘媽衣 (婆姐衣)', '床母衣'],
                notes: ['傍晚 (17:00-19:00) 祭拜最佳', '拜完化妝品一半丟高處給神明，一半留給女孩用', '家有16歲子女可做十六
